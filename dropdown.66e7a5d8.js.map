{"version":3,"sources":["components/dropdown/dropdown.js"],"names":["Dropdown","element","dropdown","elementInput","dropdownList","dropdownArrow","buttonApply","buttonClear","rowsGroupParent","rowsGroup","numbers","findElement","bindEventListeners","querySelector","querySelectorAll","classList","add","remove","toggle","toggleClass","addClass","removeClass","value","forEach","number","innerHTML","event","target","closest","result","values","declinations","newString","i","declination","String","includes","push","boolean","isMatchingValue","string","index","firstOrLastElementString","length","intermediateElementString","futureStringLength","stringWithoutComma","substring","adults","babies","Number","amountGuests","guests","countValues","bedrooms","beds","bathrooms","amountAmenities","amenities","preventDefault","contains","countTheGuests","countAmenities","addEventListener","handleIconArrowDownClick","bind","handleInputContentFocus","handleButtonsContainerForApplyClick","handleButtonsContainerForClearClick","document","handleDocumentClick","handleDropdownRowsClick","elements"],"mappings":"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","file":"dropdown.66e7a5d8.js","sourceRoot":"../src","sourcesContent":["class Dropdown {\n  constructor(element) {\n    this.dropdown = element;\n    this.elementInput = null;\n    this.dropdownList = null;\n    this.dropdownArrow = null;\n    this.buttonApply = null;\n    this.buttonClear = null;\n    this.rowsGroupParent = null;\n    this.rowsGroup = null;\n    this.numbers = null;\n\n    this.findElement();\n    this.bindEventListeners();\n  }\n\n  findElement() {\n    this.elementInput = this.dropdown.querySelector('.js-input__content');\n    this.dropdownList = this.dropdown.querySelector('.js-dropdown__content');\n    this.dropdownArrow = this.dropdown.querySelector(\n      '.js-input__icon-arrow-down',\n    );\n    this.buttonApply = this.dropdown.querySelector(\n      '.js-dropdown__buttons-container_for-apply',\n    );\n    this.buttonClear = this.dropdown.querySelector(\n      '.js-dropdown__buttons-container_for-clear',\n    );\n    this.rowsGroupParent = this.dropdown.querySelector('.dropdown__rows');\n    this.rowsGroup = this.dropdown.querySelectorAll('.js-dropdown-row');\n    this.numbers = this.dropdown.querySelectorAll(\n      '.js-dropdown-row__amount_with-count',\n    );\n  }\n\n  addClass() {\n    this.dropdownList.classList.add('dropdown__content_visible');\n  }\n\n  removeClass() {\n    this.dropdownList.classList.remove('dropdown__content_visible');\n  }\n\n  toggleClass() {\n    this.dropdownList.classList.toggle('dropdown__content_visible');\n  }\n\n  handleIconArrowDownClick() {\n    this.toggleClass();\n  }\n\n  handleInputContentFocus() {\n    this.addClass();\n  }\n\n  handleButtonsContainerForApplyClick() {\n    this.removeClass();\n  }\n\n  handleButtonsContainerForClearClick() {\n    this.elementInput.value = '';\n    this.numbers.forEach(number => {\n      const element = number;\n      element.innerHTML = '0';\n    });\n  }\n\n  handleDocumentClick(event) {\n    if (event.target.closest('.dropdown') !== this.dropdown) {\n      this.removeClass();\n    }\n  }\n\n  countValues(result, values, declinations) {\n    const isMatchingValue = value => {\n      const boolean =\n        String(value).includes('2') ||\n        String(value).includes('3') ||\n        String(value).includes('4');\n      return boolean;\n    };\n    if (result === 0) {\n      this.elementInput.value = '';\n    } else {\n      const newString = [];\n      values.forEach((value, i) => {\n        if (value !== 0) {\n          const declination = declinations[i];\n          if (String(value).includes('1')) {\n            newString.push(`${String(value)} ${declination[0]}`);\n          } else if (isMatchingValue(value)) {\n            newString.push(`${String(value)} ${declination[1]}`);\n          } else {\n            newString.push(`${String(value)} ${declination[2]}`);\n          }\n        }\n      });\n      newString.forEach((string, index) => {\n        const firstOrLastElementString =\n          (index === 0 && newString.length === 1) ||\n          index === newString.length - 1;\n        const intermediateElementString =\n          index < newString.length - 1 && newString.length > 1;\n        const futureStringLength =\n          this.elementInput.value.length + newString[index].length;\n        if (firstOrLastElementString) {\n          if (futureStringLength >= 23) {\n            const stringWithoutComma = this.elementInput.value.substring(0, 20);\n            this.elementInput.value = `${stringWithoutComma}...`;\n          } else {\n            this.elementInput.value += `${newString[index]}`;\n          }\n        } else if (intermediateElementString) {\n          this.elementInput.value += `${newString[index]}, `;\n        }\n      });\n    }\n  }\n\n  countTheGuests() {\n    let adults = 0;\n    let babies = 0;\n    this.numbers.forEach((number, index) => {\n      if (index <= 1) {\n        adults += Number(number.innerHTML);\n      } else if (index === 2) {\n        babies += Number(number.innerHTML);\n      }\n    });\n    const amountGuests = adults + babies;\n    const guests = [adults, babies];\n    const declinationGuests = ['гость', 'гостя', 'гостей'];\n    const declinationBabies = ['младенец', 'младенца', 'младенцев'];\n    const declinations = [declinationGuests, declinationBabies];\n    this.countValues(amountGuests, guests, declinations);\n  }\n\n  countAmenities() {\n    let bedrooms = 0;\n    let beds = 0;\n    let bathrooms = 0;\n\n    this.numbers.forEach((number, index) => {\n      if (index === 0) {\n        bedrooms += Number(number.innerHTML);\n      } else if (index === 1) {\n        beds += Number(number.innerHTML);\n      } else if (index === 2) {\n        bathrooms += Number(number.innerHTML);\n      }\n    });\n    const amountAmenities = bedrooms + beds + bathrooms;\n    const amenities = [bedrooms, beds, bathrooms];\n    const declinationBedrooms = ['спальня', 'спальни', 'спален'];\n    const declinationBeds = ['кровать', 'кровати', 'кроватей'];\n    const declinationBathrooms = [\n      'ванная комната',\n      'ванные комнаты',\n      'ванных комнат',\n    ];\n    const declinations = [\n      declinationBedrooms,\n      declinationBeds,\n      declinationBathrooms,\n    ];\n    this.countValues(amountAmenities, amenities, declinations);\n  }\n\n  handleDropdownRowsClick(event) {\n    event.preventDefault();\n\n    this.elementInput.value = null;\n    if (\n      this.rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-the-guests',\n      )\n    ) {\n      this.countTheGuests();\n    } else if (\n      this.rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-amenities',\n      )\n    ) {\n      this.countAmenities();\n    }\n  }\n\n  bindEventListeners() {\n    this.dropdownArrow.addEventListener(\n      'click',\n      this.handleIconArrowDownClick.bind(this),\n    );\n    this.elementInput.addEventListener(\n      'focus',\n      this.handleInputContentFocus.bind(this),\n    );\n    this.buttonApply.addEventListener(\n      'click',\n      this.handleButtonsContainerForApplyClick.bind(this),\n    );\n    this.buttonClear.addEventListener(\n      'click',\n      this.handleButtonsContainerForClearClick.bind(this),\n    );\n    document.addEventListener('click', this.handleDocumentClick.bind(this));\n    this.rowsGroup.forEach(element => {\n      element.addEventListener(\n        'click',\n        this.handleDropdownRowsClick.bind(this),\n      );\n    });\n  }\n}\n\nconst elements = document.querySelectorAll('.js-dropdown');\nelements.forEach(element => {\n  new Dropdown(element);\n});\n"]}