{"version":3,"sources":["components/dropdown/dropdown.js"],"names":["Dropdown","element","_dropdown","_elementInput","_dropdownList","_dropdownArrow","_buttonApply","_buttonClear","_rowsGroupParent","_rowsGroup","numbers","_findElement","_bindEventListeners","querySelector","querySelectorAll","_numbers","classList","add","remove","toggle","_toggleClass","_addClass","_removeClass","value","forEach","number","innerHTML","event","target","closest","result","values","declinations","newString","i","declination","String","includes","push","isMatchingValue","string","index","firstOrLastElementString","length","intermediateElementString","futureStringLength","stringWithoutComma","substring","adults","babies","Number","amountGuests","guests","_countValues","bedrooms","beds","bathrooms","amountAmenities","amenities","preventDefault","contains","_countTheGuests","_countAmenities","addEventListener","_handleIconArrowDownClick","bind","_handleInputContentFocus","_handleButtonsContainerForApplyClick","_handleButtonsContainerForClearClick","document","_handleDocumentClick","_handleDropdownRowsClick","elements"],"mappings":";AAuNA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAvNMA,IAAAA,EAAAA,WACQC,SAAAA,EAAAA,GAAS,EAAA,KAAA,GACdC,KAAAA,UAAYD,EACZE,KAAAA,cAAgB,KAChBC,KAAAA,cAAgB,KAChBC,KAAAA,eAAiB,KACjBC,KAAAA,aAAe,KACfC,KAAAA,aAAe,KACfC,KAAAA,iBAAmB,KACnBC,KAAAA,WAAa,KACbC,KAAAA,QAAU,KAEVC,KAAAA,eACAC,KAAAA,sBA0MT,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,eAvME,MAAA,WACOT,KAAAA,cAAgB,KAAKD,UAAUW,cAAc,sBAC7CT,KAAAA,cAAgB,KAAKF,UAAUW,cAAc,yBAC7CR,KAAAA,eAAiB,KAAKH,UAAUW,cACnC,8BAEGP,KAAAA,aAAe,KAAKJ,UAAUW,cACjC,qDAEGN,KAAAA,aAAe,KAAKL,UAAUW,cACjC,qDAEGL,KAAAA,iBAAmB,KAAKN,UAAUW,cAAc,mBAChDJ,KAAAA,WAAa,KAAKP,UAAUY,iBAAiB,oBAC7CC,KAAAA,SAAW,KAAKb,UAAUY,iBAC7B,yCAwLN,CAAA,IAAA,YApLE,MAAA,WACOV,KAAAA,cAAcY,UAAUC,IAAI,+BAmLrC,CAAA,IAAA,eAhLE,MAAA,WACOb,KAAAA,cAAcY,UAAUE,OAAO,+BA+KxC,CAAA,IAAA,eA5KE,MAAA,WACOd,KAAAA,cAAcY,UAAUG,OAAO,+BA2KxC,CAAA,IAAA,4BAxKE,MAAA,WACOC,KAAAA,iBAuKT,CAAA,IAAA,2BApKE,MAAA,WACOC,KAAAA,cAmKT,CAAA,IAAA,uCAhKE,MAAA,WACOC,KAAAA,iBA+JT,CAAA,IAAA,uCA5JE,MAAA,WACOnB,KAAAA,cAAcoB,MAAQ,GACtBR,KAAAA,SAASS,QAAQ,SAAAC,GACJA,EACRC,UAAY,QAwJ1B,CAAA,IAAA,uBApJE,MAAA,SAAqBC,GACfA,EAAMC,OAAOC,QAAQ,eAAiB,KAAK3B,WACxCoB,KAAAA,iBAkJX,CAAA,IAAA,eA9IE,MAAA,SAAaQ,EAAQC,EAAQC,GAAc,IAAA,EAAA,KAQrCF,GAAW,IAAXA,EACG3B,KAAAA,cAAcoB,MAAQ,OACtB,CACCU,IAAAA,EAAY,GAClBF,EAAOP,QAAQ,SAACD,EAAOW,GACjBX,GAAU,IAAVA,EAAa,CACTY,IAAAA,EAAcH,EAAaE,GAC7BE,OAAOb,GAAOc,SAAS,KACzBJ,EAAUK,KAAQF,GAAAA,OAAAA,OAAOb,GAAUY,KAAAA,OAAAA,EAAY,MAf/B,SAAAZ,GAEpBa,OAAAA,OAAOb,GAAOc,SAAS,MACvBD,OAAOb,GAAOc,SAAS,MACvBD,OAAOb,GAAOc,SAAS,KAYVE,CAAgBhB,GAGzBU,EAAUK,KAAQF,GAAAA,OAAAA,OAAOb,GAAUY,KAAAA,OAAAA,EAAY,KAF/CF,EAAUK,KAAQF,GAAAA,OAAAA,OAAOb,GAAUY,KAAAA,OAAAA,EAAY,QAMrDF,EAAUT,QAAQ,SAACgB,EAAQC,GACnBC,IAAAA,EACO,IAAVD,GAAoC,IAArBR,EAAUU,QAC1BF,IAAUR,EAAUU,OAAS,EACzBC,EACJH,EAAQR,EAAUU,OAAS,GAAKV,EAAUU,OAAS,EAC/CE,EACJ,EAAK1C,cAAcoB,MAAMoB,OAASV,EAAUQ,GAAOE,OACjDD,GAAAA,EACEG,GAAAA,GAAsB,GAAI,CACtBC,IAAAA,EAAqB,EAAK3C,cAAcoB,MAAMwB,UAAU,EAAG,IACjE,EAAK5C,cAAcoB,MAAWuB,GAAAA,OAAAA,EAA9B,YAEA,EAAK3C,cAAcoB,OAAYU,GAAAA,OAAAA,EAAUQ,SAElCG,IACT,EAAKzC,cAAcoB,OAAYU,GAAAA,OAAAA,EAAUQ,GAAzC,YAsGV,CAAA,IAAA,kBAhGE,MAAA,WACMO,IAAAA,EAAS,EACTC,EAAS,EACRlC,KAAAA,SAASS,QAAQ,SAACC,EAAQgB,GACzBA,GAAS,EACXO,GAAUE,OAAOzB,EAAOC,WACL,IAAVe,IACTQ,GAAUC,OAAOzB,EAAOC,cAGtByB,IAAAA,EAAeH,EAASC,EACxBG,EAAS,CAACJ,EAAQC,GAGlBjB,EAAe,CAFK,CAAC,QAAS,QAAS,UACnB,CAAC,WAAY,WAAY,cAE9CqB,KAAAA,aAAaF,EAAcC,EAAQpB,KAiF5C,CAAA,IAAA,kBA9EE,MAAA,WACMsB,IAAAA,EAAW,EACXC,EAAO,EACPC,EAAY,EAEXzC,KAAAA,SAASS,QAAQ,SAACC,EAAQgB,GACf,IAAVA,EACFa,GAAYJ,OAAOzB,EAAOC,WACP,IAAVe,EACTc,GAAQL,OAAOzB,EAAOC,WACH,IAAVe,IACTe,GAAaN,OAAOzB,EAAOC,cAGzB+B,IAAAA,EAAkBH,EAAWC,EAAOC,EACpCE,EAAY,CAACJ,EAAUC,EAAMC,GAQ7BxB,EAAe,CAPO,CAAC,UAAW,UAAW,UAC3B,CAAC,UAAW,UAAW,YAClB,CAC3B,iBACA,iBACA,kBAOGqB,KAAAA,aAAaI,EAAiBC,EAAW1B,KAkDlD,CAAA,IAAA,2BA/CE,MAAA,SAAyBL,GACvBA,EAAMgC,iBAEDxD,KAAAA,cAAcoB,MAAQ,KAEzB,KAAKf,iBAAiBQ,UAAU4C,SAC9B,uCAGGC,KAAAA,kBAEL,KAAKrD,iBAAiBQ,UAAU4C,SAC9B,uCAGGE,KAAAA,oBAgCX,CAAA,IAAA,sBA5BE,MAAA,WAAsB,IAAA,EAAA,KACfzD,KAAAA,eAAe0D,iBAClB,QACA,KAAKC,0BAA0BC,KAAK,OAEjC9D,KAAAA,cAAc4D,iBACjB,QACA,KAAKG,yBAAyBD,KAAK,OAEhC3D,KAAAA,aAAayD,iBAChB,QACA,KAAKI,qCAAqCF,KAAK,OAE5C1D,KAAAA,aAAawD,iBAChB,QACA,KAAKK,qCAAqCH,KAAK,OAEjDI,SAASN,iBAAiB,QAAS,KAAKO,qBAAqBL,KAAK,OAC7DxD,KAAAA,WAAWe,QAAQ,SAAAvB,GACtBA,EAAQ8D,iBACN,QACA,EAAKQ,yBAAyBN,KAAK,UAO3C,EAvNMjE,GAsNAwE,EAAWH,SAASvD,iBAAiB,gBAC3C0D,EAAShD,QAAQ,SAAAvB,GACXD,IAAAA,EAASC","file":"dropdown.448a3ff6.js","sourceRoot":"../src","sourcesContent":["class Dropdown {\n  constructor(element) {\n    this._dropdown = element;\n    this._elementInput = null;\n    this._dropdownList = null;\n    this._dropdownArrow = null;\n    this._buttonApply = null;\n    this._buttonClear = null;\n    this._rowsGroupParent = null;\n    this._rowsGroup = null;\n    this.numbers = null;\n\n    this._findElement();\n    this._bindEventListeners();\n  }\n\n  _findElement() {\n    this._elementInput = this._dropdown.querySelector('.js-input__content');\n    this._dropdownList = this._dropdown.querySelector('.js-dropdown__content');\n    this._dropdownArrow = this._dropdown.querySelector(\n      '.js-input__icon-arrow-down',\n    );\n    this._buttonApply = this._dropdown.querySelector(\n      '.js-dropdown__buttons-container_with-button-apply',\n    );\n    this._buttonClear = this._dropdown.querySelector(\n      '.js-dropdown__buttons-container_with-button-clear',\n    );\n    this._rowsGroupParent = this._dropdown.querySelector('.dropdown__rows');\n    this._rowsGroup = this._dropdown.querySelectorAll('.js-dropdown-row');\n    this._numbers = this._dropdown.querySelectorAll(\n      '.js-dropdown-row__amount_with-count',\n    );\n  }\n\n  _addClass() {\n    this._dropdownList.classList.add('dropdown__content_visible');\n  }\n\n  _removeClass() {\n    this._dropdownList.classList.remove('dropdown__content_visible');\n  }\n\n  _toggleClass() {\n    this._dropdownList.classList.toggle('dropdown__content_visible');\n  }\n\n  _handleIconArrowDownClick() {\n    this._toggleClass();\n  }\n\n  _handleInputContentFocus() {\n    this._addClass();\n  }\n\n  _handleButtonsContainerForApplyClick() {\n    this._removeClass();\n  }\n\n  _handleButtonsContainerForClearClick() {\n    this._elementInput.value = '';\n    this._numbers.forEach(number => {\n      const element = number;\n      element.innerHTML = '0';\n    });\n  }\n\n  _handleDocumentClick(event) {\n    if (event.target.closest('.dropdown') !== this._dropdown) {\n      this._removeClass();\n    }\n  }\n\n  _countValues(result, values, declinations) {\n    const isMatchingValue = value => {\n      return (\n        String(value).includes('2') ||\n        String(value).includes('3') ||\n        String(value).includes('4')\n      );\n    };\n    if (result === 0) {\n      this._elementInput.value = '';\n    } else {\n      const newString = [];\n      values.forEach((value, i) => {\n        if (value !== 0) {\n          const declination = declinations[i];\n          if (String(value).includes('1')) {\n            newString.push(`${String(value)} ${declination[0]}`);\n          } else if (isMatchingValue(value)) {\n            newString.push(`${String(value)} ${declination[1]}`);\n          } else {\n            newString.push(`${String(value)} ${declination[2]}`);\n          }\n        }\n      });\n      newString.forEach((string, index) => {\n        const firstOrLastElementString =\n          (index === 0 && newString.length === 1) ||\n          index === newString.length - 1;\n        const intermediateElementString =\n          index < newString.length - 1 && newString.length > 1;\n        const futureStringLength =\n          this._elementInput.value.length + newString[index].length;\n        if (firstOrLastElementString) {\n          if (futureStringLength >= 23) {\n            const stringWithoutComma = this._elementInput.value.substring(0, 20);\n            this._elementInput.value = `${stringWithoutComma}...`;\n          } else {\n            this._elementInput.value += `${newString[index]}`;\n          }\n        } else if (intermediateElementString) {\n          this._elementInput.value += `${newString[index]}, `;\n        }\n      });\n    }\n  }\n\n  _countTheGuests() {\n    let adults = 0;\n    let babies = 0;\n    this._numbers.forEach((number, index) => {\n      if (index <= 1) {\n        adults += Number(number.innerHTML);\n      } else if (index === 2) {\n        babies += Number(number.innerHTML);\n      }\n    });\n    const amountGuests = adults + babies;\n    const guests = [adults, babies];\n    const declinationGuests = ['гость', 'гостя', 'гостей'];\n    const declinationBabies = ['младенец', 'младенца', 'младенцев'];\n    const declinations = [declinationGuests, declinationBabies];\n    this._countValues(amountGuests, guests, declinations);\n  }\n\n  _countAmenities() {\n    let bedrooms = 0;\n    let beds = 0;\n    let bathrooms = 0;\n\n    this._numbers.forEach((number, index) => {\n      if (index === 0) {\n        bedrooms += Number(number.innerHTML);\n      } else if (index === 1) {\n        beds += Number(number.innerHTML);\n      } else if (index === 2) {\n        bathrooms += Number(number.innerHTML);\n      }\n    });\n    const amountAmenities = bedrooms + beds + bathrooms;\n    const amenities = [bedrooms, beds, bathrooms];\n    const declinationBedrooms = ['спальня', 'спальни', 'спален'];\n    const declinationBeds = ['кровать', 'кровати', 'кроватей'];\n    const declinationBathrooms = [\n      'ванная комната',\n      'ванные комнаты',\n      'ванных комнат',\n    ];\n    const declinations = [\n      declinationBedrooms,\n      declinationBeds,\n      declinationBathrooms,\n    ];\n    this._countValues(amountAmenities, amenities, declinations);\n  }\n\n  _handleDropdownRowsClick(event) {\n    event.preventDefault();\n\n    this._elementInput.value = null;\n    if (\n      this._rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-the-guests',\n      )\n    ) {\n      this._countTheGuests();\n    } else if (\n      this._rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-amenities',\n      )\n    ) {\n      this._countAmenities();\n    }\n  }\n\n  _bindEventListeners() {\n    this._dropdownArrow.addEventListener(\n      'click',\n      this._handleIconArrowDownClick.bind(this),\n    );\n    this._elementInput.addEventListener(\n      'focus',\n      this._handleInputContentFocus.bind(this),\n    );\n    this._buttonApply.addEventListener(\n      'click',\n      this._handleButtonsContainerForApplyClick.bind(this),\n    );\n    this._buttonClear.addEventListener(\n      'click',\n      this._handleButtonsContainerForClearClick.bind(this),\n    );\n    document.addEventListener('click', this._handleDocumentClick.bind(this));\n    this._rowsGroup.forEach(element => {\n      element.addEventListener(\n        'click',\n        this._handleDropdownRowsClick.bind(this),\n      );\n    });\n  }\n}\n\nconst elements = document.querySelectorAll('.js-dropdown');\nelements.forEach(element => {\n  new Dropdown(element);\n});\n"]}