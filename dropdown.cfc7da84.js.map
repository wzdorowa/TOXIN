{"version":3,"sources":["components/dropdown/dropdown.js"],"names":["Dropdown","element","dropdown","elementInput","dropdownList","dropdownArrow","buttonApply","buttonClear","rowsGroupParent","rowsGroup","numbers","findElement","bindEventListeners","querySelector","querySelectorAll","classList","add","remove","toggle","toggleClass","addClass","removeClass","value","forEach","number","innerHTML","event","target","closest","result","values","declinations","newString","i","declination","String","includes","push","string","index","length","adults","babies","Number","amountGuests","guests","countValues","bedrooms","beds","bathrooms","amountAmenities","amenities","preventDefault","contains","countTheGuests","countAmenities","addEventListener","handleIconArrowDownClick","bind","handleInputContentFocus","handleButtonsContainerForApplyClick","handleButtonsContainerForClearClick","document","handleDocumentClick","handleDropdownRowsClick","elements"],"mappings":"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","file":"dropdown.cfc7da84.js","sourceRoot":"../src","sourcesContent":["class Dropdown {\n  constructor(element) {\n    this.dropdown = element;\n    this.elementInput = null;\n    this.dropdownList = null;\n    this.dropdownArrow = null;\n    this.buttonApply = null;\n    this.buttonClear = null;\n    this.rowsGroupParent = null;\n    this.rowsGroup = null;\n    this.numbers = null;\n\n    this.findElement();\n    this.bindEventListeners();\n  }\n\n  findElement() {\n    this.elementInput = this.dropdown.querySelector('.js-input__content');\n    this.dropdownList = this.dropdown.querySelector('.js-dropdown__content');\n    this.dropdownArrow = this.dropdown.querySelector(\n      '.js-input__icon-arrow-down',\n    );\n    this.buttonApply = this.dropdown.querySelector(\n      '.js-dropdown__buttons-container_for-apply',\n    );\n    this.buttonClear = this.dropdown.querySelector(\n      '.js-dropdown__buttons-container_for-clear',\n    );\n    this.rowsGroupParent = this.dropdown.querySelector('.dropdown__rows');\n    this.rowsGroup = this.dropdown.querySelectorAll('.js-dropdown-row');\n    this.numbers = this.dropdown.querySelectorAll(\n      '.js-dropdown-row__amount_with-count',\n    );\n  }\n\n  addClass() {\n    this.dropdownList.classList.add('dropdown__content_visible');\n  }\n\n  removeClass() {\n    this.dropdownList.classList.remove('dropdown__content_visible');\n  }\n\n  toggleClass() {\n    this.dropdownList.classList.toggle('dropdown__content_visible');\n  }\n\n  handleIconArrowDownClick() {\n    this.toggleClass();\n  }\n\n  handleInputContentFocus() {\n    this.addClass();\n  }\n\n  handleButtonsContainerForApplyClick() {\n    this.removeClass();\n  }\n\n  handleButtonsContainerForClearClick() {\n    this.elementInput.value = '';\n    this.numbers.forEach(number => {\n      const element = number;\n      element.innerHTML = '0';\n    });\n  }\n\n  handleDocumentClick(event) {\n    if (event.target.closest('.dropdown') !== this.dropdown) {\n      this.removeClass();\n    }\n  }\n\n  countValues(result, values, declinations) {\n    if (result === 0) {\n      this.elementInput.value = '';\n    } else {\n      const newString = [];\n      values.forEach((value, i) => {\n        if (value !== 0) {\n          const declination = declinations[i];\n          if (String(value).includes('1')) {\n            newString.push(`${String(value)} ${declination[0]}`);\n          } else if (\n            String(value).includes('2') ||\n            String(value).includes('3') ||\n            String(value).includes('4')\n          ) {\n            newString.push(`${String(value)} ${declination[1]}`);\n          } else {\n            newString.push(`${String(value)} ${declination[2]}`);\n          }\n        }\n      });\n      newString.forEach((string, index) => {\n        if (\n          (index === 0 && newString.length === 1) ||\n          index === newString.length - 1\n        ) {\n          this.elementInput.value += `${newString[index]}`;\n        } else if (index < newString.length - 1 && newString.length > 1) {\n          this.elementInput.value += `${newString[index]}, `;\n        }\n      });\n    }\n  }\n\n  countTheGuests() {\n    let adults = 0;\n    let babies = 0;\n    this.numbers.forEach((number, index) => {\n      if (index <= 1) {\n        adults += Number(number.innerHTML);\n      } else if (index === 2) {\n        babies += Number(number.innerHTML);\n      }\n    });\n    const amountGuests = adults + babies;\n    const guests = [adults, babies];\n    const declinationGuests = ['гость', 'гостя', 'гостей'];\n    const declinationBabies = ['младенец', 'младенца', 'младенцев'];\n    const declinations = [declinationGuests, declinationBabies];\n    this.countValues(amountGuests, guests, declinations);\n  }\n\n  countAmenities() {\n    let bedrooms = 0;\n    let beds = 0;\n    let bathrooms = 0;\n\n    this.numbers.forEach((number, index) => {\n      if (index === 0) {\n        bedrooms += Number(number.innerHTML);\n      } else if (index === 1) {\n        beds += Number(number.innerHTML);\n      } else if (index === 2) {\n        bathrooms += Number(number.innerHTML);\n      }\n    });\n    const amountAmenities = bedrooms + beds + bathrooms;\n    const amenities = [bedrooms, beds, bathrooms];\n    const declinationBedrooms = ['спальня', 'спальни', 'спален'];\n    const declinationBeds = ['кровать', 'кровати', 'кроватей'];\n    const declinationBathrooms = [\n      'ванная комната',\n      'ванные комнаты',\n      'ванных комнат',\n    ];\n    const declinations = [\n      declinationBedrooms,\n      declinationBeds,\n      declinationBathrooms,\n    ];\n    this.countValues(amountAmenities, amenities, declinations);\n  }\n\n  handleDropdownRowsClick(event) {\n    event.preventDefault();\n\n    this.elementInput.value = null;\n    if (\n      this.rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-the-guests',\n      )\n    ) {\n      this.countTheGuests();\n    } else if (\n      this.rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-amenities',\n      )\n    ) {\n      this.countAmenities();\n    }\n  }\n\n  bindEventListeners() {\n    this.dropdownArrow.addEventListener(\n      'click',\n      this.handleIconArrowDownClick.bind(this),\n    );\n    this.elementInput.addEventListener(\n      'focus',\n      this.handleInputContentFocus.bind(this),\n    );\n    this.buttonApply.addEventListener(\n      'click',\n      this.handleButtonsContainerForApplyClick.bind(this),\n    );\n    this.buttonClear.addEventListener(\n      'click',\n      this.handleButtonsContainerForClearClick.bind(this),\n    );\n    document.addEventListener('click', this.handleDocumentClick.bind(this));\n    this.rowsGroup.forEach(element => {\n      element.addEventListener(\n        'click',\n        this.handleDropdownRowsClick.bind(this),\n      );\n    });\n  }\n}\n\nconst elements = document.querySelectorAll('.js-dropdown');\nelements.forEach(element => {\n  new Dropdown(element);\n});\n"]}