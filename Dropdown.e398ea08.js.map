{"version":3,"sources":["components/dropdown/Dropdown.js"],"names":["Dropdown","element","dropdown","elementInput","dropdownList","dropdownArrow","buttonApply","buttonClear","rowsGroupParent","rowsGroup","numbers","_findElement","_bindEventListeners","querySelector","parentInput","querySelectorAll","classList","add","contains","remove","toggle","_toggleClass","_addClass","_removeClass","value","forEach","number","innerHTML","event","target","closest","result","values","declinations","newString","i","declination","String","includes","push","isMatchingValue","string","index","firstOrLastElementString","length","intermediateElementString","futureStringLength","stringWithoutComma","substring","adults","babies","Number","amountGuests","guests","_countValues","bedrooms","beds","bathrooms","amountAmenities","amenities","preventDefault","_countTheGuests","_countAmenities","addEventListener","_handleIconArrowDownClick","bind","_handleInputContentFocus","_handleButtonsContainerForApplyClick","_handleButtonsContainerForClearClick","document","_handleDocumentClick","_handleDropdownRowsClick","elements"],"mappings":"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","file":"Dropdown.e398ea08.js","sourceRoot":"../src","sourcesContent":["class Dropdown {\n  constructor(element) {\n    this.dropdown = element;\n    this.elementInput = null;\n    this.dropdownList = null;\n    this.dropdownArrow = null;\n    this.buttonApply = null;\n    this.buttonClear = null;\n    this.rowsGroupParent = null;\n    this.rowsGroup = null;\n    this.numbers = null;\n\n    this._findElement();\n    this._bindEventListeners();\n  }\n\n  _findElement() {\n    this.elementInput = this.dropdown.querySelector('.js-input__content');\n    this.parentInput = this.dropdown.querySelector('.js-dropdown__list');\n    this.dropdownList = this.dropdown.querySelector('.js-dropdown__content');\n    this.dropdownArrow = this.dropdown.querySelector(\n      '.js-input__icon-arrow-down',\n    );\n    this.buttonApply = this.dropdown.querySelector(\n      '.js-dropdown__buttons-container_with-button-apply',\n    );\n    this.buttonClear = this.dropdown.querySelector(\n      '.js-dropdown__buttons-container_with-button-clear',\n    );\n    this.rowsGroupParent = this.dropdown.querySelector('.dropdown__rows');\n    this.rowsGroup = this.dropdown.querySelectorAll('.js-dropdown-row');\n    this.numbers = this.dropdown.querySelectorAll(\n      '.js-dropdown-row__amount_with-count',\n    );\n  }\n\n  _addClass() {\n    this.dropdownList.classList.add('dropdown__content_visible');\n    if (this.parentInput.contains(this.elementInput)) {\n      this.elementInput.classList.add('input__content_opened')\n    }\n  }\n\n  _removeClass() {\n    this.dropdownList.classList.remove('dropdown__content_visible');\n    if (this.parentInput.contains(this.elementInput)) {\n      this.elementInput.classList.remove('input__content_opened')\n    }\n  }\n\n  _toggleClass() {\n    this.dropdownList.classList.toggle('dropdown__content_visible');\n    if (this.parentInput.contains(this.elementInput)) {\n      this.elementInput.classList.toggle('input__content_opened')\n    }\n  }\n\n  _handleIconArrowDownClick() {\n    this._toggleClass();\n  }\n\n  _handleInputContentFocus() {\n    this._addClass();\n  }\n\n  _handleButtonsContainerForApplyClick() {\n    this._removeClass();\n  }\n\n  _handleButtonsContainerForClearClick() {\n    this.elementInput.value = '';\n    this.numbers.forEach(number => {\n      const element = number;\n      element.innerHTML = '0';\n    });\n  }\n\n  _handleDocumentClick(event) {\n    if (event.target.closest('.dropdown') !== this.dropdown) {\n      this._removeClass();\n    }\n  }\n\n  _countValues(result, values, declinations) {\n    const isMatchingValue = value => {\n      return (\n        String(value).includes('2') ||\n        String(value).includes('3') ||\n        String(value).includes('4')\n      );\n    };\n    if (result === 0) {\n      this.elementInput.value = '';\n    } else {\n      const newString = [];\n      values.forEach((value, i) => {\n        if (value !== 0) {\n          const declination = declinations[i];\n          if (String(value).includes('1')) {\n            newString.push(`${String(value)} ${declination[0]}`);\n          } else if (isMatchingValue(value)) {\n            newString.push(`${String(value)} ${declination[1]}`);\n          } else {\n            newString.push(`${String(value)} ${declination[2]}`);\n          }\n        }\n      });\n      newString.forEach((string, index) => {\n        const firstOrLastElementString =\n          (index === 0 && newString.length === 1) ||\n          index === newString.length - 1;\n        const intermediateElementString =\n          index < newString.length - 1 && newString.length > 1;\n        const futureStringLength =\n          this.elementInput.value.length + newString[index].length;\n        if (firstOrLastElementString) {\n          if (futureStringLength >= 23) {\n            const stringWithoutComma = this.elementInput.value.substring(0, 20);\n            this.elementInput.value = `${stringWithoutComma}...`;\n          } else {\n            this.elementInput.value += `${newString[index]}`;\n          }\n        } else if (intermediateElementString) {\n          this.elementInput.value += `${newString[index]}, `;\n        }\n      });\n    }\n  }\n\n  _countTheGuests() {\n    let adults = 0;\n    let babies = 0;\n    this.numbers.forEach((number, index) => {\n      if (index <= 1) {\n        adults += Number(number.innerHTML);\n      } else if (index === 2) {\n        babies += Number(number.innerHTML);\n      }\n    });\n    const amountGuests = adults + babies;\n    const guests = [adults, babies];\n    const declinationGuests = ['гость', 'гостя', 'гостей'];\n    const declinationBabies = ['младенец', 'младенца', 'младенцев'];\n    const declinations = [declinationGuests, declinationBabies];\n    this._countValues(amountGuests, guests, declinations);\n  }\n\n  _countAmenities() {\n    let bedrooms = 0;\n    let beds = 0;\n    let bathrooms = 0;\n\n    this.numbers.forEach((number, index) => {\n      if (index === 0) {\n        bedrooms += Number(number.innerHTML);\n      } else if (index === 1) {\n        beds += Number(number.innerHTML);\n      } else if (index === 2) {\n        bathrooms += Number(number.innerHTML);\n      }\n    });\n    const amountAmenities = bedrooms + beds + bathrooms;\n    const amenities = [bedrooms, beds, bathrooms];\n    const declinationBedrooms = ['спальня', 'спальни', 'спален'];\n    const declinationBeds = ['кровать', 'кровати', 'кроватей'];\n    const declinationBathrooms = [\n      'ванная комната',\n      'ванные комнаты',\n      'ванных комнат',\n    ];\n    const declinations = [\n      declinationBedrooms,\n      declinationBeds,\n      declinationBathrooms,\n    ];\n    this._countValues(amountAmenities, amenities, declinations);\n  }\n\n  _handleDropdownRowsClick(event) {\n    event.preventDefault();\n\n    this.elementInput.value = null;\n    if (\n      this.rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-the-guests',\n      )\n    ) {\n      this._countTheGuests();\n    } else if (\n      this.rowsGroupParent.classList.contains(\n        'dropdown__rows_for-count-amenities',\n      )\n    ) {\n      this._countAmenities();\n    }\n  }\n\n  _bindEventListeners() {\n    this.dropdownArrow.addEventListener(\n      'click',\n      this._handleIconArrowDownClick.bind(this),\n    );\n    this.elementInput.addEventListener(\n      'focus',\n      this._handleInputContentFocus.bind(this),\n    );\n    this.buttonApply.addEventListener(\n      'click',\n      this._handleButtonsContainerForApplyClick.bind(this),\n    );\n    this.buttonClear.addEventListener(\n      'click',\n      this._handleButtonsContainerForClearClick.bind(this),\n    );\n    document.addEventListener('click', this._handleDocumentClick.bind(this));\n    this.rowsGroup.forEach(element => {\n      element.addEventListener(\n        'click',\n        this._handleDropdownRowsClick.bind(this),\n      );\n    });\n  }\n}\n\nconst elements = document.querySelectorAll('.js-dropdown');\nelements.forEach(element => {\n  new Dropdown(element);\n});\n"]}